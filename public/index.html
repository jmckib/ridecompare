<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Lyft vs Uber</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Custom CSS -->
    <style>
     body {
         padding-top: 70px;
         /* Required padding for .navbar-fixed-top. Remove if using .navbar-static-top. Change if height of navigation changes. */
     }
    </style>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>

    <!-- Page Content -->
    <div class="container">

      <div class="row">
        <div class="col-lg-12 text-center">
          <h1>Compare Lyft and Uber Fares</h1>

			<div class="form-group">
			  <div class="input-group input-group-lg">
				<input id="input-start" class="form-control" type="text" placeholder="STARTING POINT">
				<span class="input-group-addon" style="padding: 0 25.5px;">PICKUP</span>
			  </div>
			</div>
			<div class="form-group">
			  <div class="input-group input-group-lg">
				<input id="input-dest" class="form-control" type="text" placeholder="DESTINATION">
				<span class="input-group-addon">DROPOFF</span>
			  </div>
			</div>
        </div>
      </div>
	  <div class="row">
		<div class="col-lg-12 text-center">
		  <div id="results"></div>
		</div>
	  </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

    <!-- jQuery Version 2.2.4 -->
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

	<!-- Google Maps API -->
	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZZSkbGU3PhEdQPKnVpsEFt-c9KNjm3yQ&libraries=places"></script>

	<script>
	 var input_start = document.getElementById('input-start');
	 var input_dest = document.getElementById('input-dest');

	 var start = null;
	 var dest = null;
	 var $div_results = $('div#results');

	 function get_directions() {
		 if (!start || !dest) {
			 return;
		 }

		 var directions_service = new google.maps.DirectionsService();
		 directions_service.route({
			 origin: {'placeId': start.place_id},
			 destination: {'placeId': dest.place_id},
			 travelMode: google.maps.TravelMode.DRIVING
		 }, function(response, status) {
			 if (status === google.maps.DirectionsStatus.OK) {
				 var directions = response.routes[0].legs[0];
				 var miles = directions.distance.value / 1609.34;  // value in meters
				 var minutes = directions.duration.value / 60.0;  // value in seconds
				 var lyft_cost = (1.75 + Math.max(.90 + .12 * minutes + .78 * miles, 6)).toFixed(2);
				 $div_results.html("<strong>Lyft Standard: " + lyft_cost);
			 } else {
				 window.alert('Directions request failed due to ' + status);
			 }
		 });
	 }

	 var autocomplete_start = new google.maps.places.Autocomplete(input_start);
	 autocomplete_start.addListener('place_changed', function() {
		 start = autocomplete_start.getPlace();
		 get_directions();
	 });

	 var autocomplete_dest = new google.maps.places.Autocomplete(input_dest);
	 autocomplete_dest.addListener('place_changed', function() {
		 dest = autocomplete_dest.getPlace();
		 get_directions();
	 });

	</script>
  </body>

</html>
